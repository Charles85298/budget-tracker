<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Budget Table With Filters â€” Month Chips</title>
  <style>
    :root{
      --bg:#faf7f2;
      --card:#ffffff;
      --text:#111827;       /* strong contrast */
      --muted:#6b7280;      /* >=4.5:1 on white */
      --inactive:#374151;   /* inactive chip text (~7:1) */
      --accent:#1d4ed8;     /* active/hover/focus (~6.3:1) */
      --border:#e5e7eb;
      --shadow: rgba(0,0,0,0.06);
    }
    *{box-sizing:border-box}
    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);padding:20px;color:var(--text)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:20px;max-width:420px;margin:auto;overflow:hidden;box-shadow:0 1px 2px var(--shadow)}

    /* Month bar wrapper with subtle fades */
    .monthbar-wrap{
      position: sticky; top: 0; z-index: 10;
      background: var(--card);
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
    }
    .monthbar-wrap::before,
    .monthbar-wrap::after{
      content:""; position:absolute; top:0; bottom:0; width:24px; z-index:11; pointer-events:none;
    }
    .monthbar-wrap::before{ left:0;  background: linear-gradient(90deg, var(--card), rgba(255,255,255,0)); }
    .monthbar-wrap::after{  right:0; background: linear-gradient(270deg, var(--card), rgba(255,255,255,0)); }

    /* Scrollable month chips */
    .monthbar{
      display:flex; gap:8px;
      overflow-x:auto; overflow-y:hidden;
      scroll-snap-type:x mandatory;
      scrollbar-width:none; -ms-overflow-style:none;
      padding:4px 6px; scroll-padding-inline: 40px;
    }
    .monthbar::-webkit-scrollbar{ display:none; }
    .chip{
      flex:0 0 auto; scroll-snap-align:center;
      background:none; border:none; cursor:pointer;
      padding:8px 12px; border-radius:999px;
      color:var(--inactive); font-weight:600; font-size:.95rem;
      border-bottom:2px solid transparent;
      transition: color .18s ease, border-color .18s ease;
    }
    .chip:hover{ color:var(--accent); }
    .chip.active{ color:var(--accent); border-bottom-color:var(--accent); }
    .chip:focus-visible,
    .filters button:focus-visible{
      outline:2px solid var(--accent); outline-offset:2px; border-radius:8px;
    }

    /* Filter bar (now includes All + Edit + category filters) */
    .filters{display:flex;gap:12px;padding:12px 16px;justify-content:center;flex-wrap:wrap;background:#f3f4f6;border-radius:12px}
    .filters button{
      display:flex;align-items:center;gap:6px;background:none;border:none;cursor:pointer;
      font-weight:500;color:#374151;font-size:.9rem;padding:6px 10px;border-bottom:2px solid transparent;
    }
    .filters button svg{width:18px;height:18px;stroke-width:2}
    .filters button:hover{color:var(--accent)}
    .filters button.active{color:var(--accent);font-weight:600;border-bottom-color:var(--accent)}

    table{width:100%;border-collapse:collapse}
    th,td{padding:12px;border-bottom:1px solid var(--border);text-align:left}
    th{color:#6b7280;font-weight:600}
    tr:last-child td{border-bottom:none}

    /* Hidden Month column (still in DOM for filtering) */
    .hidden-col{display:none;}

    /* Visual cue while editing */
    [contenteditable="true"]{background:#fef9c3;}
  </style>
</head>
<body>
  <div class="card">
    <!-- Month chips -->
    <div class="monthbar-wrap">
      <div class="monthbar" role="radiogroup" aria-label="Select month" tabindex="0" id="monthbar">
        <!-- Chips injected by JS -->
      </div>
    </div>

    <!-- Filter Bar (All + Edit + categories) -->
    <div class="filters" role="toolbar" aria-label="Filters">
      <button type="button" aria-pressed="true" id="btnAll" title="Show all categories">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 4h6v6H4zM14 4h6v6h-6zM4 14h6v6H4zM14 14h6v6h-6z"/></svg>
        All
      </button>

      <!-- Edit moved here -->
      <button type="button" id="editBtn" title="Edit table values">Edit</button>

      <button type="button" id="btnPaid" title="Show Paid">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Paid
      </button>
      <button type="button" id="btnDue" title="Show Due">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6v6l4 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Due
      </button>
      <button type="button" id="btnFunded" title="Show Funded">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="2" y="5" width="20" height="14" rx="2" ry="2"/><path d="M2 10h20"/></svg>
        Funded
      </button>
      <button type="button" id="btnNotDue" title="Show Not Due">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/></svg>
        Not Due
      </button>
    </div>

    <!-- Table -->
    <table>
      <thead>
        <tr>
          <th scope="col">Category</th>
          <th scope="col">Payee</th>
          <th scope="col">Check</th>
          <th scope="col" class="hidden-col">Month</th> <!-- Hidden Month -->
          <th scope="col">Due</th>
          <th scope="col">Account</th>
        </tr>
      </thead>
      <tbody>
        <!-- ========== JAN ========== -->
        <tr><th scope="row">Paid</th><td>Best Buy</td><td>1</td><td class="hidden-col">Jan</td><td>15</td><td>Bill Pay</td></tr>
        <tr><th scope="row">Paid</th><td>SRP</td><td>1</td><td class="hidden-col">Jan</td><td>3</td><td>Bill Pay</td></tr>
        <tr><th scope="row">Paid</th><td>Ford</td><td>1</td><td class="hidden-col">Jan</td><td>6</td><td>Personal Checking</td></tr>
        <tr><th scope="row">Funded</th><td>Car</td><td>1</td><td class="hidden-col">Jan</td><td>7</td><td>Bill Pay</td></tr>
        <tr><th scope="row">Funded</th><td>Home</td><td>2</td><td class="hidden-col">Jan</td><td>9</td><td>Biz Checking</td></tr>

        <!-- ========== FEB ========== -->
        <tr><th scope="row">Due</th><td>Best Egg</td><td>2</td><td class="hidden-col">Feb</td><td>17</td><td>Bill Pay</td></tr>
        <tr><th scope="row">Due</th><td>Wells Fargo</td><td>1</td><td class="hidden-col">Feb</td><td>16</td><td>Bill Pay</td></tr>
        <tr><th scope="row">Not Due</th><td>Citi Bank</td><td>3</td><td class="hidden-col">Feb</td><td>25</td><td>Personal Checking</td></tr>
        <tr><th scope="row">Not Due</th><td>Geico</td><td>3</td><td class="hidden-col">Feb</td><td>30</td><td>Bill Pay</td></tr>

        <!-- ========== MAR ========== -->
        <tr><th scope="row">Due</th><td>Gas</td><td>2</td><td class="hidden-col">Mar</td><td>14</td><td>Bill Pay</td></tr>
      </tbody>
    </table>
  </div>

  <script>
    /* -------------------------
       ROWS + SHARED STATE
       ------------------------- */
    const rows = document.querySelectorAll('tbody tr');

    // Category multi-select
    const btnAll     = document.getElementById('btnAll');
    const btnPaid    = document.getElementById('btnPaid');
    const btnDue     = document.getElementById('btnDue');
    const btnFunded  = document.getElementById('btnFunded');
    const btnNotDue  = document.getElementById('btnNotDue');
    const activeCategories = new Set();

    // Month chips bar
    const monthbar = document.getElementById('monthbar');
    const months = [
      { short:'Jan', long:'January' }, { short:'Feb', long:'February' }, { short:'Mar', long:'March' },
      { short:'Apr', long:'April' },   { short:'May', long:'May' },      { short:'Jun', long:'June' },
      { short:'Jul', long:'July' },    { short:'Aug', long:'August' },   { short:'Sep', long:'September' },
      { short:'Oct', long:'October' }, { short:'Nov', long:'November' }, { short:'Dec', long:'December' }
    ];
    let currentMonth = null; // e.g., 'Feb'

    /* -------------------------
       BUILD MONTH CHIPS
       ------------------------- */
    months.forEach(m => {
      const btn = document.createElement('button');
      btn.className = 'chip';
      btn.type = 'button';
      btn.setAttribute('role', 'radio');
      btn.setAttribute('aria-label', m.long);
      btn.dataset.short = m.short;
      btn.dataset.long  = m.long;
      btn.textContent = m.short;
      monthbar.appendChild(btn);
    });
    const monthChips = Array.from(monthbar.querySelectorAll('.chip'));

    function setActiveMonthChip(idx, center=true){
      monthChips.forEach((chip, i) => {
        const active = i === idx;
        chip.classList.toggle('active', active);
        chip.setAttribute('aria-checked', active ? 'true' : 'false');
        if (active && center) chip.scrollIntoView({ inline:'center', block:'nearest', behavior:'smooth' });
      });
    }

    /* -------------------------
       APPLY FILTERS (Month + Category)
       ------------------------- */
    function applyFilters() {
      rows.forEach(row => {
        const rowMonth  = (row.querySelector('td.hidden-col')?.textContent || '').trim();
        const rowCat    = row.querySelector('th[scope="row"]').textContent.trim();

        const monthPass = currentMonth ? (rowMonth === currentMonth) : true;
        const catPass   = activeCategories.size === 0 || activeCategories.has(rowCat);

        row.style.display = (monthPass && catPass) ? '' : 'none';
      });
    }

    /* -------------------------
       CATEGORY HANDLERS
       ------------------------- */
    function toggleCategory(value, btn) {
      if (activeCategories.has(value)) {
        activeCategories.delete(value);
        btn.classList.remove('active');
      } else {
        activeCategories.add(value);
        btn.classList.add('active');
      }
      applyFilters();
    }
    btnPaid.addEventListener('click',   () => toggleCategory('Paid',   btnPaid));
    btnDue.addEventListener('click',    () => toggleCategory('Due',    btnDue));
    btnFunded.addEventListener('click', () => toggleCategory('Funded', btnFunded));
    btnNotDue.addEventListener('click', () => toggleCategory('Not Due', btnNotDue));
    btnAll.addEventListener('click', () => {
      activeCategories.clear();
      [btnPaid, btnDue, btnFunded, btnNotDue].forEach(b => b.classList.remove('active'));
      applyFilters();
    });

    /* -------------------------
       MONTH CHIP HANDLERS
       ------------------------- */
    monthChips.forEach((chip, idx) => {
      chip.addEventListener('click', () => {
        currentMonth = chip.dataset.short;
        setActiveMonthChip(idx);
        applyFilters();
      });
    });

    // Keyboard navigation for month bar (optional but nice)
    monthbar.addEventListener('keydown', (e) => {
      const keys = ['ArrowLeft','ArrowRight','Home','End','Enter',' '];
      if (!keys.includes(e.key)) return;
      e.preventDefault();
      let activeIdx = monthChips.findIndex(c => c.classList.contains('active'));
      if (activeIdx < 0) activeIdx = 0;
      if (e.key === 'ArrowLeft')  activeIdx = (activeIdx - 1 + monthChips.length) % monthChips.length;
      if (e.key === 'ArrowRight') activeIdx = (activeIdx + 1) % monthChips.length;
      if (e.key === 'Home')       activeIdx = 0;
      if (e.key === 'End')        activeIdx = monthChips.length - 1;
      if (['Enter',' '].includes(e.key)) {
        // select current chip
      }
      currentMonth = monthChips[activeIdx].dataset.short;
      setActiveMonthChip(activeIdx);
      applyFilters();
    });

    /* -------------------------
       EDIT / SAVE (PROMPT ONLY)
       ------------------------- */
    const editButton = document.getElementById('editBtn');
    const tableCells = document.querySelectorAll('tbody td, tbody th[scope="row"]');
    let editing = false;
    editButton.addEventListener('click', () => {
      editing = !editing;
      if (editing) {
        editButton.textContent = 'Save';
        tableCells.forEach(cell => cell.setAttribute('contenteditable', 'true'));
      } else {
        confirm('Do you want to save your changes?'); // prompt only
        editButton.textContent = 'Edit';
        tableCells.forEach(cell => cell.removeAttribute('contenteditable'));
      }
    });

    /* -------------------------
       INITIAL VIEW: show only Feb
       ------------------------- */
    document.addEventListener('DOMContentLoaded', () => {
      // Pick Feb if present; otherwise fall back to first visible month chip
      const initialIdx = months.findIndex(m => m.short === 'Feb');
      const idx = initialIdx >= 0 ? initialIdx : 0;
      currentMonth = months[idx].short;
      setActiveMonthChip(idx, false);
      // Center after layout
      requestAnimationFrame(() => monthChips[idx].scrollIntoView({ inline:'center', block:'nearest' }));
      applyFilters();
    });
  </script>
</body>
</html>
