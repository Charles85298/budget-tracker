<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Budget Tracker Test</title>
</head>
<body>
  <h1>Budget Tracker Test</h1>

<script type="module">
  import { supabase } from './supabaseClient.js';

  // show current session
  const { data: { session } } = await supabase.auth.getSession();
  console.log('session:', session?.user?.id || 'not signed in');

  // if not signed in, send magic link
  if (!session) {
    const email = 'charles.g.fleming@gmail.com'; // replace with a real address for testing
    const { error } = await supabase.auth.signInWithOtp({
      email,
      options: { emailRedirectTo: 'https://charles85298.github.io/budget-tracker/' }
    });
    console.log(error ?? 'Magic link sent');
  } else {
    // signed in â†’ read paychecks
    const { data, error } = await supabase.from('paychecks').select('employer');
    console.log({ data, error });
  }
</script>
</body>
</html>
